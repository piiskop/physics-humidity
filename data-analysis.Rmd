# Andmeanalüüs

Arvutustes kasutan rõhuna standardset atmosfääri, et tulemused oleksid võrreldavad graafikuga \@ref(fig:psychrometric-diagram).

```{r label = "data-analysis"}
method <- c("Augusti psühhomeeter")
t_d <- c(24)
t_w <- c(16.5)
T_w <- GetTKelvinFromTCelsius(t_w)
p_w_H2O <- calculate_p_H2O(T_w)
gamma_w <- calculate_gamma_H2O(p_w_H2O, T_w)
p_dp <- p_w_H2O - (t_d - t_w) * p_at / 1510
T_d <- GetTKelvinFromTCelsius(t_d)
gamma_d <- calculate_gamma_H2O(calculate_p_H2O(T_d), T_d)
p_d_H2O <- calculate_p_H2O(T_d)
RH <- p_dp / p_d_H2O

psychrometry <- data.frame(
  method,
  t_d,
  T_d,
  gamma_d,
  t_w,
  T_w,
  gamma_w,
  p_dp,
  RH
)

colnames(psychrometry) = c(
  "Meetod või sensor",
  "$\\frac{t_\\text{d}}{\\unit{\\degreeCelsius}}$",
  "$\\frac{T_\\text{d}}{\\unit{\\kelvin}}$",
  "$\\frac{\\gamma_\\text{d}}{\\unit{\\kilogram\\per\\cubic\\meter}}$",
  "$\\frac{t_\\text{w}}{\\unit{\\degreeCelsius}}$",
  "$\\frac{T_\\text{w}}{\\unit{\\kelvin}}$",
  "$\\frac{\\gamma_\\text{w}}{\\unit{\\kilogram\\per\\cubic\\meter}}$",
  "$\\frac{p_\\text{dp}(\\ce{H_2O})}{\\unit{\\Pa}}$",
  "RH"
)


print_table(psychrometry, caption = "Suhtelise niiskuse arvutamise sisend- ja väljundandmed, milles $w$ tähendab märga ja $d$ kuiva keskkonda ning $dp$ kastepunkti.", digits = 5)


librarian::shelf("psychrolib")
SetUnitSystem("SI")
# psychometrics <- CalcPsychrometricsFromTWetBulb(t, t1, p_at)
# print(psychometrics)
# GetDegreeOfSaturation(t, psychometrics$HumRatio, p_at)
GetDryAirVolume(t, p_at)
# GetMoistAirDensity(t, psychometrics$HumRatio, p_at)
# GetMoistAirVolume(t, psychometrics$HumRatio, p_at)
GetSatVapPres(t)
GetStandardAtmPressure(10)
GetStationPressure(p_at, 10, t)
# GetVaporPressureDeficit(t, psychometrics$HumRatio, p_at)
# GetVapPresFromHumRatio(psychometrics$HumRatio, p_at)
# > 1/69.006*1000-.64*(24-16.5)
# [1] 9.691493
# > 9.691493/(1/45.863*1000)
# [1] 0.4444809
# > .5/755*1013.25
# [1] 0.6710265
librarian::shelf("MeTo")
psyc_cons(elev = 2, P = 101.3)
# > -5.8002206e3/(24+273.15) + 1.3914993e0 - 4.8640239e-2*(24+273.15) + 4.1764768e-5*(24+273.15)^2 - 1.4452093e-8*(24+273.15)^3 + 6.5459673e0*log((24+273.15))
# [1] 8.001398
# > exp(1)^8.001398
# [1] 2985.128
# > 2985.128*.018/8.314472/(24+273.15)
# [1] 0.02174829

```

